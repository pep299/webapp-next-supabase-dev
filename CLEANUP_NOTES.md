# クリーンアップ作業記録

## 2025-01-09 整理作業で発見した想定外の問題

### 1. vitest.setup.tsとReact依存関係の問題
**問題**: プレースホルダーテストファイルを削除後、vitest.setup.tsがReactに依存していることでcore/dbパッケージのテストが失敗

**解決策**: 
- core/dbパッケージのvitest.configからsetupFilesを削除（Reactが不要なため）
- UIパッケージも一時的にsetupFilesを無効化（プレースホルダーテスト用）
- ルートpackage.jsonにReact/React-DOMを再追加（共通依存関係として必要）

**学習**: 
- monorepoでのテスト設定は、各パッケージの性質（React使用/不使用）を考慮する必要がある
- 共通のsetupファイルは全パッケージに適用されるため、最小公約数的な設定にするか、パッケージ毎に分ける必要がある

### 2. Mantine依存関係の整理時の発見
**問題**: UIパッケージでexportしているMantineモジュールの一部（carousel, modals, spotlight, tiptap）が依存関係に含まれていなかった

**解決策**: 不足していた依存関係をUIパッケージに追加

**学習**: 
- export文があるモジュールは必ず依存関係に含める必要がある
- 依存関係の整理時は、実際のimport/export文と照合確認が重要

### 3. 設定ファイルの共通化について
**判断**: Next.js、TypeScript、Tailwindの設定重複があったが、時期尚早として共通化を見送り

**理由**: 
- プロジェクト初期段階で、偶然同じ設定なのか、ドメイン境界的に分けるべきなのか判断困難
- 実際の開発が進んでパターンが見えてから判断する方が賢明

### 4. テストファイルの扱い
**問題**: プレースホルダーテストファイルを削除したが、テストが見つからないエラーが発生

**解決策**: 一時的に新しいプレースホルダーテストファイルを作成

**今後の方針**: 
- 実際のテストが実装されるまでプレースホルダーテストで対応
- UIパッケージは実際のReactコンポーネントテスト実装時にsetupFilesを再有効化

## 整理完了項目
- ✅ claude_logs/ディレクトリ削除
- ✅ プレースホルダーテストファイル削除・再作成
- ✅ 機能しないhealth-check.js削除
- ✅ 未使用Mantine依存関係削除
- ✅ Mantineバージョン統一（v8.1.3）
- ✅ テスト修正（全パッケージ通過）
- ✅ ビルド・リント・フォーマット確認